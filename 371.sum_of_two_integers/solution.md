# Solution

兩數相加會產生 carry 問題，所以可以將相加拆分成三個步驟
1. 不考慮 carry
2. 只考慮 carry
3. 重複執行 `1` 與 `2` 的直到 `2` 的結果為 0（代表沒有 carry 所以 `1` 的結果就是相加的總和 ） 

`1` 與 `2` 的步驟可以使用 bit 運算

> golang 不需額外處理 mask

**XOR**
可以用來計算不考慮 carry 的部分

|A|B|A^B|
|:---:|:---:|:---:|
|0|0|0|
|1|0|1|
|0|1|1|
|1|1|0|

**AND**
可以用來計算只考慮 carry 的部分，但只用 `AND` 只能取得原先哪些位置需要 carry ，實際上要完成 carry 的動作會需要向左位移一位。
|A|B|A&B|
|:---:|:---:|:---:|
|0|0|0|
|1|0|0|
|0|1|0|
|1|1|1|

## Dry Run

範例皆以 8 bit 二進位表示

### 正整數的相加

計算 3 + 7 的總和

```
 情況1
 0000 0011 (3)
^0000 0111 (7)
---------------
 0000 0100 (4)

 情況2
 0000 0011 (3)
&0000 0111 (7)
---------------
 0000 0011 (3)
 AND 的結果需左移一位得到進位
 0000 0011 << 1 => 0000 0110 (6)
```

```
 情況1
 0000 0100 (4)
^0000 0110 (6)
--------------
 0000 0010 (2)

 情況2
 0000 0100 (4)
&0000 0110 (6)
--------------
 0000 0100 (4)
 AND 的結果需左移一位得到進位
 0000 0100 << 1 => 0000 1000 (8)
```

```
 情況1
 0000 0010 (2)
^0000 1000 (8)
--------------
 0000 1010 (10)

 情況2
 0000 0010 (2)
&0000 1000 (8)
--------------
 0000 0000 (0)
 AND 的結果需左移一位得到進位
 0000 0000 << 1 => 0000 0000 (0)
 結果為 0 ，所以"情況1"就是相加的總和為 0000 1010 (10)
```

### 負整數的相加

計算 (-3) + (-7) 的總和（負數皆用 two's complement 表示）

> 負數要使用 two's complement 表示需先轉成 one's complement 格式再加 1 
> 而 one's complement 格式就是對負數的正整數取反。
> 範例：
> 0000 0011 (3) 取反為 1111 1100 -> 為 -3 的 one's complement 格式
> 1111 1100(-3) 加 1 為 1111 1101 -> 為 -3 的 two's complement 格式
>
> 0000 0111 (7) 取反為 1111 1000 -> 為 -7 的 one's complement 格式
> 1111 1000(-7) 加 1 為 1111 1001 -> 為 -7 的 two's complement 格式

> 而 two's complement 格式的二進位要轉換成十進位需要先取反再加 1
> 1111 0010 (-14) 取反為 0000 1101
> 0000 1101 再加 1 為 0000 1110 (14)
> 因為最一開始二進位的表示為負數，所以加上負號為 -14 

```
 情況1
 1111 1101 (-3)
^1111 1001 (-7)
--------------
 0000 0100 (4)

 情況2
 1111 1101 (-3)
&1111 1001 (-7)
--------------
 1111 1001 (-7)
 AND 的結果需左移一位得到進位
 1111 1001 << 1 => 1111 0010 (-14)
```

```
 情況1
 0000 0100 (4)
^1111 0010 (-14)
--------------
 1111 0110 (-10)
 
 情況2
 0000 0100 (4)
&1111 0010 (-14)
--------------
 0000 0000 (0)
 AND 的結果需左移一位得到進位
 0000 0000 << 1 => 0000 0000 (0)
 結果為 0 ，所以"情況1"就是相加的總和為 1111 0110 (-10)
```

### 正、負整數的相加

計算 (-3) + (4) 的總和（負數皆用 two's complement 表示）

```
 情況1
 1111 1101 (-3)
^0000 0100 (4)
--------------
 1111 1001 (-7)

 情況2
 1111 1101 (-3)
&0000 0100 (4)
--------------
 0000 0100 (4)
 AND 的結果需左移一位得到進位
 0000 0100 << 1 => 0000 1000 (8)
```

```
 情況1
 1111 1001 (-7)
^0000 1000 (8)
--------------
 1111 0001

 情況2
 1111 1001 (-7)
&0000 1000 (8)
--------------
 0000 1000 (8)
 AND 的結果需左移一位得到進位
 0000 1000 << 1 => 0001 0000 (16)
```

```
 情況1
 1111 0001
^0001 0000
--------------
 1110 0001

 情況2
 1111 0001
&0001 0000
--------------
 0001 0000
 AND 的結果需左移一位得到進位
 0001 0000 << 1 => 0010 0000 
```

```
 情況1
 1110 0001
^0010 0000
--------------
 1100 0001

 情況2
 1110 0001
&0010 0000
--------------
 0010 0000
 AND 的結果需左移一位得到進位
 0010 0000 << 1 => 0100 0000
```

```
 情況1
 1100 0001
^0100 0000
--------------
 1000 0001

 情況2
 1100 0001
&0100 0000
--------------
 0100 0000 
 AND 的結果需左移一位得到進位
 0100 0000 << 1 => 1000 0000
```

```
 情況1
 1000 0001
^1000 0000
--------------
 0000 0001

 情況2
 1000 0001
&1000 0000
--------------
 1000 0000 
 AND 的結果需左移一位得到進位
 1000 0000 << 1 => 0000 0000
 結果為 0 所以"情況1"就是相加的總和為 0000 0001 (1)
```
